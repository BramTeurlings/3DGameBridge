cmake_minimum_required(VERSION 3.23)
project (unit_tests VERSION 0.1)

set (CMAKE_CXX_STANDARD 20)

add_executable(unit_tests
        test_event_system.cpp
        test_hotkey_system.cpp
        test_game_bridge_system.cpp
        test_platform_system.cpp
)

# Add gtest submodule
target_include_directories(unit_tests PRIVATE ../third-party/googletest/googletest/include)

target_link_libraries(unit_tests PRIVATE 3DGameBridge)

# Gtest
target_link_libraries(unit_tests PRIVATE gtest gtest_main)

# Copy dependancies
add_custom_command(
    TARGET unit_tests POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy "$<TARGET_FILE:3DGameBridge>" "$<TARGET_FILE_DIR:unit_tests>"
	DEPENDS 3DGameBridge
)
